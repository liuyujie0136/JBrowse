"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[8752],{58752:function(e,a,t){t.r(a),t.d(a,{default:function(){return F}});var r=t(33028),n=t(34795),s=t(96234),i=t(77162),o=t.n(i),l=t(30969),c=t(22714),d=t(80975),p=t(94534),u=t(94702),h=t(53492),m=t(80508),f=t(28599),v=t(81073),g=t(9077),y=t(90550),x=t(56477),k=t(74062),j=t(1720),b=t(7690),N=t(24940),w=t(40909),Z=t(97891),T=t(37574),M=(0,c.Z)((function(e){return{spacing:{marginBottom:e.spacing(3)}}}));function S(e){var a,t=e.trackAdapter,r=e.trackType,n=M();return"SNPCoverageAdapter"===t.type?(0,T.jsxs)(d.Z,{className:n.spacing,children:["Selected ",(0,T.jsx)("code",{children:r}),". Using adapter"," ",(0,T.jsx)("code",{children:t.type})," with subadapter"," ",(0,T.jsx)("code",{children:null===(a=t.subadapter)||void 0===a?void 0:a.type}),". Please enter a track name and, if necessary, update the track type."]}):(0,T.jsxs)(d.Z,{className:n.spacing,children:["Using adapter ",(0,T.jsx)("code",{children:t.type})," and guessing track type"," ",(0,T.jsx)("code",{children:r}),". Please enter a track name and, if necessary, update the track type."]})}function C(e){var a="",t=[];return e.forEach((function(e){var r;if(null!==(r=e.adapterMetadata)&&void 0!==r&&r.category){var n,s,i,o,l,c,d;if(a!==(null===(n=e.adapterMetadata)||void 0===n?void 0:n.category))a=null===(o=e.adapterMetadata)||void 0===o?void 0:o.category,t.push((0,T.jsx)(k.Z,{value:null===(c=e.adapterMetadata)||void 0===c?void 0:c.category,children:null===(d=e.adapterMetadata)||void 0===d?void 0:d.category},null===(l=e.adapterMetadata)||void 0===l?void 0:l.category));t.push((0,T.jsx)(j.Z,{value:e.name,children:null!==(s=e.adapterMetadata)&&void 0!==s&&s.displayName?null===(i=e.adapterMetadata)||void 0===i?void 0:i.displayName:e.name},e.name))}})),t}var D=(0,y.observer)((function(e){var a=e.model,t=M(),r=(0,v.getSession)(a),n=a.trackAdapter,s=(0,w.getEnv)(r).pluginManager.getElementTypesInGroup("adapter");return(0,T.jsxs)(b.Z,{className:t.spacing,value:"UNKNOWN"!==(null===n||void 0===n?void 0:n.type)?null===n||void 0===n?void 0:n.type:"",label:"adapterType",helperText:"Select an adapter type",select:!0,fullWidth:!0,onChange:function(e){a.setAdapterHint(e.target.value)},SelectProps:{SelectDisplayProps:{"data-testid":"adapterTypeSelect"}},children:[s.filter((function(e){var a,t;return!(null!==(a=e.adapterMetadata)&&void 0!==a&&a.hiddenFromGUI)&&!(null!==(t=e.adapterMetadata)&&void 0!==t&&t.category)})).map((function(e){var a,t;return(0,T.jsx)(j.Z,{value:e.name,children:null!==(a=e.adapterMetadata)&&void 0!==a&&a.displayName?null===(t=e.adapterMetadata)||void 0===t?void 0:t.displayName:e.name},e.name)})),C(s.filter((function(e){var a;return!(null!==(a=e.adapterMetadata)&&void 0!==a&&a.hiddenFromGUI)})))]})}));function A(e){var a=e.model,t=M();return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(d.Z,{className:t.spacing,children:["JBrowse was not able to guess the adapter type for this data, but it may be in the list below. If not, you can"," ",(0,T.jsx)(N.Z,{href:"https://github.com/GMOD/jbrowse-components/releases",target:"_blank",rel:"noopener noreferrer",children:"check for new releases"})," ","of JBrowse to see if they support this data type or"," ",(0,T.jsx)(N.Z,{href:"https://github.com/GMOD/jbrowse-components/issues/new",target:"_blank",rel:"noopener noreferrer",children:"file an issue"})," ","and add a feature request for this data type."]}),(0,T.jsx)(D,{model:a})]})}var I=(0,y.observer)((function(e){var a=e.model,t=M(),r=(0,v.getSession)(a),n=a.trackType,s=(0,w.getEnv)(r).pluginManager.getElementTypesInGroup("track");return(0,T.jsx)(b.Z,{className:t.spacing,value:n,label:"trackType",helperText:"Select a track type",select:!0,fullWidth:!0,onChange:function(e){a.setTrackType(e.target.value)},SelectProps:{SelectDisplayProps:{"data-testid":"trackTypeSelect"}},children:s.map((function(e){var a=e.name;return(0,T.jsx)(j.Z,{value:a,children:a},a)}))})})),O=(0,y.observer)((function(e){var a=e.model,t=(0,v.getSession)(a),r=a.assembly;return(0,T.jsx)(b.Z,{value:r,label:"assemblyName",helperText:"Assembly to which the track will be added",select:!0,fullWidth:!0,onChange:function(e){return a.setAssembly(e.target.value)},SelectProps:{SelectDisplayProps:{"data-testid":"assemblyNameSelect"}},children:t.assemblies.map((function(e){return(0,g.readConfObject)(e,"name")})).map((function(e){return(0,T.jsx)(j.Z,{value:e,children:e},e)}))})}));var P=(0,y.observer)((function(e){var a=e.model,t=M(),r=a.trackName,n=a.trackAdapter,s=a.trackType,i=a.warningMessage,o=a.adapterHint;return a.unsupported?(0,T.jsxs)(d.Z,{className:t.spacing,children:["This version of JBrowse cannot display data of this type. It is possible, however, that there is a newer version that can display them. You can"," ",(0,T.jsx)(N.Z,{href:"https://github.com/GMOD/jbrowse-components/releases",target:"_blank",rel:"noopener noreferrer",children:"check for new releases"})," ","of JBrowse or"," ",(0,T.jsx)(N.Z,{href:"https://github.com/GMOD/jbrowse-components/issues/new",target:"_blank",rel:"noopener noreferrer",children:"file an issue"})," ","and add a feature request for this data type."]}):(null===n||void 0===n?void 0:n.type)===Z.UNKNOWN?(0,T.jsx)(A,{model:a}):(""===o&&n&&a.setAdapterHint(n.type),null!==n&&void 0!==n&&n.type?(0,T.jsxs)("div",{children:[n?(0,T.jsx)(S,{trackAdapter:n,trackType:s}):null,i?(0,T.jsx)(d.Z,{style:{color:"orange"},children:i}):null,(0,T.jsx)(b.Z,{className:t.spacing,label:"trackName",helperText:"A name for this track",fullWidth:!0,value:r,onChange:function(e){return a.setTrackName(e.target.value)},inputProps:{"data-testid":"trackNameInput"}}),(0,T.jsx)(D,{model:a}),(0,T.jsx)(I,{model:a}),(0,T.jsx)(O,{model:a})]}):(0,T.jsx)(d.Z,{children:"Could not recognize this data type."}))})),U=t(24998),_=t(51526),B=(0,c.Z)((function(e){return{paper:{display:"flex",flexDirection:"column",padding:e.spacing(1)},spacer:{height:e.spacing(8)}}}));var G=(0,y.observer)((function(e){var a=e.model,t=B(),r=(0,w.getRoot)(a);return(0,T.jsxs)(_.Z,{className:t.paper,children:[(0,T.jsx)(U.FileSelector,{name:"Main file",description:"",location:a.trackData,setLocation:a.setTrackData,setName:a.setTrackName,rootModel:r}),(0,T.jsx)("div",{className:t.spacer}),(0,T.jsx)(U.FileSelector,{name:"Index file",description:"(Optional) The URL of the index file is automatically inferred from the URL of the main file if it is not supplied.",location:a.indexTrackData,setLocation:a.setIndexTrackData,setName:a.setTrackName,rootModel:r})]})})),W=(0,c.Z)((function(e){return{root:{marginTop:e.spacing(1)},stepper:{backgroundColor:e.palette.background.default},button:{marginTop:e.spacing(1),marginRight:e.spacing(1)},actionsContainer:{marginBottom:e.spacing(2)},stepContent:{margin:e.spacing(1)},alertContainer:{padding:"".concat(e.spacing(2),"px 0px ").concat(e.spacing(2),"px 0px")}}})),E=["Enter track data","Confirm track type"];var F=(0,y.observer)((function(e){var a=e.model,t=(0,l.useState)(0),i=(0,s.Z)(t,2),c=i[0],y=i[1],k=W(),j=(0,v.getSession)(a),b=a.assembly,N=a.trackAdapter,w=a.trackData,Z=a.trackName,M=a.trackType,S=(0,l.useState)(),C=(0,s.Z)(S,2),D=C[0],A=C[1];function I(e){switch(e){case 0:return(0,T.jsx)(G,{model:a});case 1:return(0,T.jsx)(P,{model:a});default:return(0,T.jsx)(d.Z,{children:"Unknown step"})}}function O(){return U.apply(this,arguments)}function U(){return(U=(0,n.Z)(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c===E.length-1){e.next=3;break}return y(c+1),e.abrupt("return");case 3:t="".concat(Z.toLowerCase().replace(/ /g,"_"),"-").concat(Date.now()).concat(j.adminMode?"":"-sessionTrack"),n=j.assemblyManager.get(b),N&&"UNKNOWN"!==N.type?(j.addTrackConf({trackId:t,type:M,name:Z,assemblyNames:[b],adapter:(0,r.Z)((0,r.Z)({},N),{},{sequenceAdapter:(0,g.getConf)(n,["sequence","adapter"])})}),a.view?a.view.showTrack(t):j.notify("Open a new view, or use the track selector in an existing view, to view this track","info"),a.clearData(),j.hideWidget(a)):A("Failed to add track.\nThe configuration of this file is not currently supported.");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){A(void 0),y(c-1)}function B(){switch(c){case 0:return!w;case 1:return!(Z&&M&&null!==N&&void 0!==N&&N.type&&b);default:return!0}}return(0,T.jsx)("div",{className:k.root,children:(0,T.jsx)(p.Z,{className:k.stepper,activeStep:c,orientation:"vertical",children:E.map((function(e,a){return(0,T.jsxs)(u.Z,{children:[(0,T.jsx)(h.Z,{children:e}),(0,T.jsxs)(m.Z,{children:[I(a),(0,T.jsxs)("div",{className:k.actionsContainer,children:[(0,T.jsx)(f.Z,{disabled:0===c,onClick:_,className:k.button,children:"Back"}),(0,T.jsx)(f.Z,{disabled:B(),variant:"contained",color:"primary",onClick:O,className:k.button,"data-testid":"addTrackNextButton",children:c===E.length-1?"Add":"Next"})]}),D?(0,T.jsx)("div",{className:k.alertContainer,children:(0,T.jsx)(x.Z,{severity:"error",children:D})}):null]})]},e)}))})})}))}}]);
//# sourceMappingURL=8752.b9ba729f.chunk.js.map